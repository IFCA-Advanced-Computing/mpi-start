#
# Copyright (c) 2006-2007 High Performance Computing Center Stuttgart,
#                         University of Stuttgart.  All rights reserved.
#               2009-2010 Instituto de FÃ­sica de Cantabria,
#                         CSIC - UC. All rights reserved.
#

Summary: MPI startup mechanism abstraction layer 
Name: @NAME_PREFIX@mpi-start
Version: @VERSION@
Release: 1%{?dist}
License: GPLv2
Group: Development/Tools
Source: https://devel.ifca.es/mpi-start/downloads/mpi-start-%{version}.tar.gz
URL: http://devel.ifca.es/mpi-start/
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n) 
BuildArch: noarch
#Vendor: EMI
# ETICS as Packager!
#Packager: ETICS

%description
A generic startup mechanism for different MPI installation in a cluster/grid.

%prep
%setup -q

%build
cd $RPM_BUILD_DIR/@NAME_PREFIX@mpi-start-@VERSION@
%configure 
%{__make}

%install
rm -rf $RPM_BUILD_ROOT
cd $RPM_BUILD_DIR/@NAME_PREFIX@mpi-start-@VERSION@
%{__make} destdir=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
%{_bindir}/mpi-start
%{_sysconfdir}/mpi-start/
%{_mandir}/man1/*
%config(noreplace) %{_sysconfdir}/profile.d/mpi_start.sh
%config(noreplace) %{_sysconfdir}/profile.d/mpi_start.csh
%doc docs/AUTHORS docs/COPYING docs/LICENSE 

%changelog
* Mon Oct 17 2011 Enol Fernandez <enolfc _AT_ ifca.unican.es> - 1.1.0-1%{?dist}
- Better EPEL compliance

* Fri Sep 30 2011 Enol Fernandez <enolfc _AT_ ifca.unican.es> - 1.1.0-1
- Fixed bugs #38 (https://devel.ifca.es/mpi-start/ticket/38), 
  #31 (https://devel.ifca.es/mpi-start/ticket/31), and
  #35 (https://devel.ifca.es/mpi-start/ticket/35)
- New MPI affinity hook
- New per proc/per socket/per core options for controlling processes
- New man page
- Updated documentation

* Fri Mar 4 2011 Enol Fernandez <enolfc _AT_ ifca.unican.es> - 1.0.4-1
- Fedora guidelines compliant package.
- See ChangeLog at doc directory.
