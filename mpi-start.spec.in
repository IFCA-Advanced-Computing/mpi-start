#
# Copyright (c) 2006-2007 High Performance Computing Center Stuttgart,
#                         University of Stuttgart.  All rights reserved.
#               2009-2010 Instituto de FÃ­sica de Cantabria,
#                         CSIC - UC. All rights reserved.
#

Summary: A generic startup mechanism for different MPI installation in a cluster/grid
Name: @NAME_PREFIX@mpi-start
Version: @VERSION@
Release: 1
License: GPLv2
Group: System Environment/Libraries
Source: https://devel.ifca.es/hg/mpi-start/archive/mpi-start-@VERSION@.tar.gz
URL: http://devel.ifca.es/mpi-start/
BuildRoot: %{_tmppath}/%{name}-%{version}-rpmroot
BuildArch: noarch
# Packager: Enol Fernandez <enofc@ifca.unican.es>
Vendor: EMI

%description
A generic startup mechanism for different MPI installation in a cluster/grid.

%prep
%setup -q

%build
cd $RPM_BUILD_DIR/@NAME_PREFIX@mpi-start-@VERSION@
./configure --prefix=%{_prefix} --sysconfdir=%{_sysconfdir} --datadir=%{_datadir} --libdir=%{_libdir} --mandir=%{_mandir}
%{__make}

%install
rm -rf $RPM_BUILD_ROOT/*
cd $RPM_BUILD_DIR/@NAME_PREFIX@mpi-start-@VERSION@
%{__make} destdir=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT/*

%files
%defattr(-,root,root,-)
%{_bindir}/mpi-start
%{_sysconfdir}/mpi-start/
%{_datadir}/doc/mpi-start-%{version}/
%{_mandir}/man1/*
%config(noreplace) %{_sysconfdir}/profile.d/mpi_start.sh
%config(noreplace) %{_sysconfdir}/profile.d/mpi_start.csh

%changelog
* Wed Aug 10 2011 <enolfc _AT_ ifca.unican.es> - 1.1.0-1
- Fixed bugs #38 (https://devel.ifca.es/mpi-start/ticket/38), 
  #31 (https://devel.ifca.es/mpi-start/ticket/31), and
  #35 (https://devel.ifca.es/mpi-start/ticket/35)
- New MPI affinity hook
- New per proc/per socket/per core options for controlling processes
- New man page
- Updated documentation

* Fri Mar 4 2011 <enolfc _AT_ ifca.unican.es> - 1.0.4-1
- Fedora guidelines compliant package.
- See ChangeLog at doc directory.
