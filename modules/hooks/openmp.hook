#!/bin/sh 
#
# Copyright (c) 2009-2010  Instituto de Fisica de Cantabria - CSIC. 
#                          All rights reserved.

#
# hook for using OpenMP 
# defines the OMP_NUM_THREADS variable
#
pre_run_hook () {
    if test "x$MPI_USE_OMP" != "x1" ; then
        return 0
    fi
    debug_msg "Defining OMP_NUM_THREADS for OpenMP."

    # XXX what about non uniform slots allocations?
    mpi_start_export_variable OMP_NUM_THREADS $MPI_START_NSLOTS_PER_HOST
    return 0
}
